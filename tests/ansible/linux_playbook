---
- hosts: all
  name: Provisioning tasks
  roles:
    - common
    - docker
    - linux

- hosts: all
  name: Install GH runner
  vars:
    - runner_user: debian
    - access_token: "{{ lookup('env', 'GITHUB_TOKEN') }}"
    - runner_extra_config_args: "--ephemeral"
    - runner_name: bw-linux
    - github_account: "{{ lookup('env', 'GITHUB_ACCOUNT') }}"
    - github_owner: bunkerity
    - github_repo: bunkerweb
    - runner_labels:
        - bw-linux
  roles:
    - monolithprojects.github_actions_runner
